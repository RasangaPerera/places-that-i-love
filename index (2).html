<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Places That I Love üíï</title>
    <meta name="description" content="A kawaii-themed app to save and organize your favorite places">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Quicksand', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        body {
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Animations */
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        
        @keyframes float-delayed {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-15px); }
        }
        
        @keyframes pulse-slow {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.05); }
        }
        
        @keyframes bounce-slow {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes float-guide {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            25% { transform: translateY(-8px) rotate(2deg); }
            50% { transform: translateY(-12px) rotate(0deg); }
            75% { transform: translateY(-8px) rotate(-2deg); }
        }
        
        @keyframes sparkle {
            0%, 100% { opacity: 1; transform: scale(1) rotate(0deg); }
            50% { opacity: 0.6; transform: scale(1.2) rotate(180deg); }
        }
        
        @keyframes sparkle-delayed {
            0%, 100% { opacity: 0.8; transform: scale(1) rotate(0deg); }
            50% { opacity: 0.4; transform: scale(1.3) rotate(-180deg); }
        }
        
        @keyframes fade-in-up {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fade-in {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes pulse-gentle {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        .animate-float { animation: float 3s ease-in-out infinite; }
        .animate-float-delayed { animation: float-delayed 3s ease-in-out infinite 0.5s; }
        .animate-pulse-slow { animation: pulse-slow 3s ease-in-out infinite; }
        .animate-bounce-slow { animation: bounce-slow 2s ease-in-out infinite; }
        .animate-float-guide { animation: float-guide 4s ease-in-out infinite; }
        .animate-sparkle { animation: sparkle 2s ease-in-out infinite; }
        .animate-sparkle-delayed { animation: sparkle-delayed 2s ease-in-out infinite 0.7s; }
        .animate-fade-in-up { animation: fade-in-up 0.5s ease-out forwards; }
        .animate-fade-in { animation: fade-in 1s ease-out forwards; }
        .animate-pulse-gentle { animation: pulse-gentle 2s ease-in-out infinite; }

        /* Utility Classes */
        .hidden { display: none; }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }
        
        ::-webkit-scrollbar-track {
            background: #FFE5F0;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #FFB6D9 0%, #FFA5C8 100%);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #FF6B9D 0%, #FFA5C8 100%);
        }

        /* Kawaii Character */
        .kawaii-character {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .character-glow {
            position: absolute;
            inset: 0;
            background: linear-gradient(to bottom right, #FFB6D9, #FFA5C8);
            border-radius: 50%;
            filter: blur(40px);
            opacity: 0.3;
            animation: pulse-slow 3s ease-in-out infinite;
        }

        .character-body {
            position: relative;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, #FFB6D9 0%, #FFA5C8 50%, #FF6B9D 100%);
            border-radius: 50%;
            box-shadow: inset 0 -10px 20px rgba(255, 255, 255, 0.3), 0 10px 30px rgba(255, 105, 180, 0.4);
        }

        .character-bow {
            position: absolute;
            top: -8px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 4px;
        }

        .bow-part {
            width: 16px;
            height: 16px;
            background: #FFA5C8;
            border-radius: 50%;
            box-shadow: 0 2px 8px rgba(255, 105, 180, 0.6);
        }

        .character-face {
            position: absolute;
            top: 25%;
            left: 50%;
            transform: translateX(-50%);
            width: 75%;
            height: 50%;
        }

        .eye {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #333;
            border-radius: 50%;
        }

        .eye-left { top: 25%; left: 25%; }
        .eye-right { top: 25%; right: 25%; }

        .eye-shine {
            position: absolute;
            top: 0;
            right: 0;
            width: 4px;
            height: 4px;
            background: white;
            border-radius: 50%;
        }

        .blush {
            position: absolute;
            width: 12px;
            height: 8px;
            background: #FFB6D9;
            border-radius: 50%;
            opacity: 0.6;
        }

        .blush-left { top: 33%; left: 8px; }
        .blush-right { top: 33%; right: 8px; }

        .smile {
            position: absolute;
            bottom: 25%;
            left: 50%;
            transform: translateX(-50%);
            width: 16px;
            height: 8px;
            border-bottom: 2px solid #333;
            border-radius: 0 0 16px 16px;
        }

        /* Screen containers */
        .screen {
            min-height: 100vh;
            padding-bottom: 96px;
        }

        .gradient-bg {
            background: linear-gradient(180deg, #FFE5F0 0%, #FFF0F7 100%);
        }

        .gradient-bg-2 {
            background: linear-gradient(180deg, #FFF5F9 0%, #FFE5EF 100%);
        }

        /* Button styles */
        .btn-primary {
            background: linear-gradient(135deg, #FF6B9D 0%, #FFA5C8 100%);
            box-shadow: 0 8px 25px rgba(255, 107, 157, 0.4);
            color: white;
            font-weight: bold;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 12px 30px rgba(255, 107, 157, 0.5);
        }

        /* Header */
        .header {
            position: sticky;
            top: 0;
            z-index: 10;
            backdrop-filter: blur(12px);
            background: rgba(255, 255, 255, 0.8);
            border-bottom: 2px solid #FFB6D9;
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 24px;
            border: 2px solid #FFB6D9;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .card:hover {
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15);
            transform: scale(1.05);
        }

        /* Guide bubble */
        .guide-bubble {
            position: relative;
            background: white;
            border-radius: 24px;
            border: 3px solid #FFB6D9;
            padding: 24px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
            animation: fade-in-up 0.5s ease-out forwards;
        }

        .guide-bubble::after {
            content: '';
            position: absolute;
            bottom: -8px;
            right: 32px;
            width: 16px;
            height: 16px;
            background: white;
            transform: rotate(45deg);
            border-right: 3px solid #FFB6D9;
            border-bottom: 3px solid #FFB6D9;
        }

        /* Form inputs */
        .input {
            width: 100%;
            padding: 16px 24px;
            border-radius: 16px;
            border: 2px solid #FFB6D9;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .input:focus {
            outline: none;
            border-color: #FF6B9D;
        }

        /* Photo upload */
        .photo-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
        }

        .photo-preview {
            position: relative;
            height: 128px;
            border-radius: 16px;
            overflow: hidden;
            border: 2px solid #FFB6D9;
        }

        .photo-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .photo-delete {
            position: absolute;
            top: -8px;
            right: -8px;
            width: 28px;
            height: 28px;
            background: #EF4444;
            border-radius: 50%;
            color: white;
            border: none;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .photo-preview:hover .photo-delete {
            opacity: 1;
        }

        .photo-upload {
            height: 128px;
            border: 2px dashed #FFB6D9;
            border-radius: 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .photo-upload:hover {
            border-color: #FF6B9D;
            background: rgba(255, 182, 217, 0.1);
        }

        /* Floating action button */
        .fab {
            position: fixed;
            bottom: 32px;
            right: 32px;
            width: 64px;
            height: 64px;
            border-radius: 50%;
            background: linear-gradient(135deg, #FF6B9D 0%, #FFA5C8 100%);
            box-shadow: 0 8px 25px rgba(255, 107, 157, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 40;
            border: none;
        }

        .fab:hover {
            transform: scale(1.1);
        }
    </style>
</head>
<body>
    <div id="app"></div>

    <script>
        // App State
        let state = {
            currentView: 'splash',
            places: JSON.parse(localStorage.getItem('places') || '[]'),
            selectedPlace: null,
            showGuide: true,
            formData: {
                name: '',
                location: '',
                description: '',
                images: [],
                wouldReturn: ''
            }
        };

        // Collections
        const collections = [
            { id: 1, name: 'Pet Cafes', subtitle: 'Cat/Puppy Cafes', icon: 'üêæ' },
            { id: 2, name: 'Solo Date', subtitle: 'Co-Working Spaces', icon: 'üåº' },
            { id: 3, name: 'Friends', subtitle: 'More Activities', icon: 'üì±' },
            { id: 4, name: 'Rainy Day/Comfy', subtitle: 'Closest/Comfort Food', icon: 'üçî' }
        ];

        // Guide messages
        const guideMessages = {
            splash: "Hi! I'm your kawaii guide! üíï Let's explore amazing places together!",
            home: "Tap the pink + button to add your first favorite place! ‚ú®",
            collections: "Organize your favorite places by category! üéÄ",
            add: "Fill in the details about this special place! üíñ",
            detail: "All the yummy details about this place! üå∏"
        };

        // Save to localStorage
        function savePlaces() {
            localStorage.setItem('places', JSON.stringify(state.places));
        }

        // Render functions
        function renderKawaiiCharacter(size = 'medium') {
            const sizes = {
                small: 'width: 80px; height: 80px;',
                medium: 'width: 112px; height: 112px;',
                large: 'width: 192px; height: 192px;',
                xlarge: 'width: 256px; height: 256px;'
            };

            return `
                <div class="kawaii-character" style="${sizes[size]}">
                    <div class="character-glow"></div>
                    <div class="character-body">
                        <div class="character-bow">
                            <div class="bow-part"></div>
                            <div class="bow-part"></div>
                        </div>
                        <div class="character-face">
                            <div class="eye eye-left">
                                <div class="eye-shine"></div>
                            </div>
                            <div class="eye eye-right">
                                <div class="eye-shine"></div>
                            </div>
                            <div class="blush blush-left"></div>
                            <div class="blush blush-right"></div>
                            <div class="smile"></div>
                        </div>
                    </div>
                    <div style="position: absolute; top: -8px; right: -8px; font-size: 20px;" class="animate-float">üíï</div>
                    <div style="position: absolute; bottom: 8px; left: -4px; font-size: 14px;" class="animate-float-delayed">‚ú®</div>
                </div>
            `;
        }

        function renderGuide() {
            if (!state.showGuide) return '';

            const message = guideMessages[state.currentView] || '';
            if (!message) return '';

            return `
                <div style="position: fixed; bottom: 96px; right: 32px; z-index: 50;" class="animate-float-guide">
                    <div style="position: relative; margin-bottom: 16px;">
                        <div class="guide-bubble" style="max-width: 320px;">
                            <button onclick="state.showGuide = false; render();" style="position: absolute; top: -8px; right: -8px; width: 24px; height: 24px; background: #FF6B9D; border-radius: 50%; color: white; border: none; cursor: pointer;">‚úï</button>
                            <p style="color: #333; font-weight: 500; line-height: 1.6;">${message}</p>
                        </div>
                    </div>
                    <div style="position: relative; cursor: pointer;" onclick="state.showGuide = !state.showGuide; render();">
                        ${renderKawaiiCharacter('medium')}
                        <div style="position: absolute; top: -8px; right: -8px; font-size: 24px;" class="animate-sparkle">‚ú®</div>
                        <div style="position: absolute; top: 16px; left: -8px; font-size: 20px;" class="animate-sparkle-delayed">üíï</div>
                        <div style="position: absolute; bottom: 8px; right: 8px; font-size: 18px;" class="animate-sparkle">‚≠ê</div>
                    </div>
                    <button onclick="alert('Tutorial feature coming soon! üíï')" style="margin-top: 8px; width: 100%; padding: 8px; background: linear-gradient(to right, #FFA5C8, #FF6B9D); color: white; border: none; border-radius: 24px; font-weight: 600; font-size: 12px; cursor: pointer; box-shadow: 0 4px 12px rgba(255, 105, 180, 0.3);">Need Help? üíù</button>
                </div>
            `;
        }

        function renderSplashScreen() {
            return `
                <div class="screen gradient-bg" style="display: flex; align-items: center; justify-content: center; padding: 32px;">
                    <div style="text-align: center; max-width: 480px;">
                        <div style="margin-bottom: 48px; position: relative;">
                            <div style="position: absolute; inset: 0;" class="animate-pulse-slow">
                                <div style="position: absolute; top: 40px; left: 40px; font-size: 32px;" class="animate-float">üíï</div>
                                <div style="position: absolute; top: 80px; right: 40px; font-size: 24px;" class="animate-float-delayed">‚ú®</div>
                                <div style="position: absolute; bottom: 40px; left: 80px; font-size: 24px;" class="animate-float">üíñ</div>
                                <div style="position: absolute; bottom: 80px; right: 80px; font-size: 20px;" class="animate-float-delayed">üå∏</div>
                            </div>
                            <div class="animate-bounce-slow" style="display: flex; justify-content: center;">
                                ${renderKawaiiCharacter('xlarge')}
                            </div>
                        </div>
                        <h1 style="font-size: 48px; margin-bottom: 16px; color: #FF69B4; text-shadow: 2px 2px 4px rgba(255, 182, 217, 0.5); font-weight: bold;" class="animate-fade-in">Places That I Love</h1>
                        <p style="color: #FFA5C8; font-size: 18px; margin-bottom: 32px;" class="animate-fade-in">Your kawaii guide to remembering special places! üíù</p>
                        <button onclick="changeView('home')" class="btn-primary animate-pulse-gentle" style="padding: 16px 48px; font-size: 20px; border-radius: 999px; margin-top: 32px;">Start Exploring ‚ú®</button>
                    </div>
                </div>
            `;
        }

        function renderHomeScreen() {
            const placesHtml = state.places.length === 0 ? `
                <div style="max-width: 960px; margin: 0 auto; padding: 64px 24px 32px; text-align: center;">
                    <div style="display: inline-block; margin-bottom: 24px; position: relative;">
                        <div class="animate-bounce-slow">
                            ${renderKawaiiCharacter('large')}
                        </div>
                        <div style="position: absolute; top: -16px; right: -16px; font-size: 32px;" class="animate-float">‚ú®</div>
                        <div style="position: absolute; bottom: -8px; left: -16px; font-size: 24px;" class="animate-float-delayed">üíï</div>
                    </div>
                    <h3 style="font-size: 32px; font-weight: bold; color: #FF69B4; margin-bottom: 12px;">Start Your Journey!</h3>
                    <p style="color: #666; font-size: 18px; margin-bottom: 32px;">Add your first favorite place and never forget those special moments! üå∏</p>
                    
                    <div style="display: flex; flex-direction: column; gap: 16px; max-width: 480px; margin: 0 auto;">
                        <div class="card" style="padding: 16px;">
                            <div style="display: flex; align-items: flex-start; gap: 12px; text-align: left;">
                                <div style="width: 40px; height: 40px; border-radius: 50%; background: rgba(255, 182, 217, 0.2); display: flex; align-items: center; justify-content: center; flex-shrink: 0;">üìç</div>
                                <div>
                                    <h4 style="font-weight: bold; color: #FF6B9D; margin-bottom: 4px;">Save Places</h4>
                                    <p style="font-size: 14px; color: #666;">Remember cafes, restaurants, and special spots</p>
                                </div>
                            </div>
                        </div>
                        <div class="card" style="padding: 16px;">
                            <div style="display: flex; align-items: flex-start; gap: 12px; text-align: left;">
                                <div style="width: 40px; height: 40px; border-radius: 50%; background: rgba(255, 182, 217, 0.2); display: flex; align-items: center; justify-content: center; flex-shrink: 0;">üì∏</div>
                                <div>
                                    <h4 style="font-weight: bold; color: #FF6B9D; margin-bottom: 4px;">Capture Moments</h4>
                                    <p style="font-size: 14px; color: #666;">Upload up to 5 photos per place</p>
                                </div>
                            </div>
                        </div>
                        <div class="card" style="padding: 16px;">
                            <div style="display: flex; align-items: flex-start; gap: 12px; text-align: left;">
                                <div style="width: 40px; height: 40px; border-radius: 50%; background: rgba(255, 182, 217, 0.2); display: flex; align-items: center; justify-content: center; flex-shrink: 0;">‚ú®</div>
                                <div>
                                    <h4 style="font-weight: bold; color: #FF6B9D; margin-bottom: 4px;">Organize Collections</h4>
                                    <p style="font-size: 14px; color: #666;">Group by date spots, study cafes, or vibes</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            ` : `
                <div style="max-width: 960px; margin: 0 auto; padding: 32px 24px;">
                    <h3 style="font-size: 28px; font-weight: bold; color: #333; margin-bottom: 24px;">Your Places (${state.places.length})</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 24px;">
                        ${state.places.map(place => `
                            <div class="card" style="cursor: pointer; padding: 0; overflow: hidden;" onclick="viewPlace(${place.id})">
                                ${place.images && place.images.length > 0 ? `
                                    <img src="${place.images[0]}" style="width: 100%; height: 180px; object-fit: cover;" alt="${place.name}">
                                ` : `
                                    <div style="width: 100%; height: 180px; background: linear-gradient(135deg, #FFB6D9 0%, #FFA5C8 100%); display: flex; align-items: center; justify-content: center; font-size: 48px;">üìç</div>
                                `}
                                <div style="padding: 16px;">
                                    <h4 style="font-weight: bold; font-size: 18px; color: #333; margin-bottom: 4px;">${place.name}</h4>
                                    <p style="font-size: 14px; color: #666; margin-bottom: 8px;">üìç ${place.location}</p>
                                    <p style="font-size: 14px; color: #999; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">${place.description || 'No description'}</p>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;

            return `
                <div class="screen gradient-bg-2">
                    <div class="header">
                        <div style="max-width: 960px; margin: 0 auto; padding: 16px 24px; display: flex; align-items: center; justify-content: space-between;">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="width: 48px; height: 48px; border-radius: 50%; background: linear-gradient(135deg, #FFB6D9 0%, #FFA5C8 100%); display: flex; align-items: center; justify-content: center;">‚ù§Ô∏è</div>
                                <h2 style="font-size: 24px; font-weight: bold; color: #FF69B4;">Places That I Love</h2>
                            </div>
                            <button onclick="changeView('collections')" class="btn-primary" style="padding: 8px 24px; font-size: 14px; border-radius: 999px;">Collections</button>
                        </div>
                    </div>
                    ${placesHtml}
                    <button onclick="changeView('add')" class="fab">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                    </button>
                </div>
            `;
        }

        function renderCollectionsScreen() {
            return `
                <div class="screen gradient-bg-2">
                    <div class="header">
                        <div style="max-width: 960px; margin: 0 auto; padding: 16px 24px; display: flex; align-items: center; gap: 16px;">
                            <button onclick="changeView('home')" style="width: 40px; height: 40px; border-radius: 50%; background: rgba(255, 182, 217, 0.2); border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; color: #FF6B9D; font-size: 20px;">‚Üê</button>
                            <h2 style="font-size: 24px; font-weight: bold; color: #FF69B4;">Collections</h2>
                        </div>
                    </div>
                    <div style="max-width: 960px; margin: 0 auto; padding: 32px 24px;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 24px;">
                            ${collections.map(col => `
                                <div class="card" style="padding: 24px; cursor: pointer;">
                                    <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 16px;">
                                        <div style="font-size: 32px;">${col.icon}</div>
                                        <div>
                                            <h3 style="font-weight: bold; font-size: 18px; color: #333;">${col.name}</h3>
                                            <p style="font-size: 14px; color: #666;">${col.subtitle}</p>
                                        </div>
                                    </div>
                                    <div style="text-align: center; padding: 32px 0; color: #999;">
                                        <p>No places yet</p>
                                        <p style="font-size: 14px; margin-top: 8px;">Add places to this collection!</p>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
        }

        function renderAddPlaceScreen() {
            return `
                <div class="screen gradient-bg-2">
                    <div class="header">
                        <div style="max-width: 960px; margin: 0 auto; padding: 16px 24px; display: flex; align-items: center; gap: 16px;">
                            <button onclick="changeView('home')" style="width: 40px; height: 40px; border-radius: 50%; background: rgba(255, 182, 217, 0.2); border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; color: #FF6B9D; font-size: 20px;">‚úï</button>
                            <h2 style="font-size: 24px; font-weight: bold; color: #FF69B4;">Add New Place</h2>
                        </div>
                    </div>
                    <div style="max-width: 640px; margin: 0 auto; padding: 32px 24px;">
                        <div class="card" style="padding: 32px;">
                            <!-- Photos -->
                            <div style="margin-bottom: 24px;">
                                <label style="display: block; font-size: 20px; font-weight: bold; color: #FF69B4; margin-bottom: 12px;">Photos (Max 5)</label>
                                <div class="photo-grid" id="photoGrid">
                                    ${state.formData.images.map((img, i) => `
                                        <div class="photo-preview">
                                            <img src="${img}" alt="Preview">
                                            <button class="photo-delete" onclick="removeImage(${i})">‚úï</button>
                                        </div>
                                    `).join('')}
                                    ${state.formData.images.length < 5 ? `
                                        <label class="photo-upload">
                                            <span style="font-size: 32px; margin-bottom: 8px;">üì∑</span>
                                            <span style="font-size: 14px; color: #FFA5C8; font-weight: 500;">Add Photo</span>
                                            <input type="file" accept="image/*" multiple onchange="handleImageUpload(event)" style="display: none;">
                                        </label>
                                    ` : ''}
                                </div>
                                <p style="font-size: 14px; color: #666; margin-top: 8px;">${state.formData.images.length}/5 photos</p>
                            </div>

                            <!-- Name -->
                            <div style="margin-bottom: 24px;">
                                <label style="display: block; font-size: 20px; font-weight: bold; color: #FF69B4; margin-bottom: 12px;">Place Name</label>
                                <input type="text" class="input" placeholder="Enter place name..." oninput="state.formData.name = this.value" value="${state.formData.name}">
                            </div>

                            <!-- Location -->
                            <div style="margin-bottom: 24px;">
                                <label style="display: block; font-size: 20px; font-weight: bold; color: #FF69B4; margin-bottom: 12px;">Location</label>
                                <input type="text" class="input" placeholder="Enter location..." oninput="state.formData.location = this.value" value="${state.formData.location}">
                            </div>

                            <!-- Description -->
                            <div style="margin-bottom: 24px;">
                                <label style="display: block; font-size: 20px; font-weight: bold; color: #FF69B4; margin-bottom: 12px;">Description</label>
                                <textarea class="input" rows="4" placeholder="Tell us about this place..." oninput="state.formData.description = this.value" style="resize: none;">${state.formData.description}</textarea>
                                <p style="font-size: 14px; color: #666; margin-top: 8px;">${state.formData.description.length}/300 characters</p>
                            </div>

                            <!-- Would Return -->
                            <div style="margin-bottom: 32px;">
                                <label style="display: block; font-size: 20px; font-weight: bold; color: #FF69B4; margin-bottom: 12px;">Would I go again?</label>
                                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px;">
                                    <button onclick="state.formData.wouldReturn = 'yes'; render();" style="padding: 16px; border-radius: 16px; font-weight: bold; font-size: 16px; border: none; cursor: pointer; transition: all 0.3s; ${state.formData.wouldReturn === 'yes' ? 'background: linear-gradient(to right, #FFA5C8, #FF6B9D); color: white; box-shadow: 0 4px 12px rgba(255, 105, 180, 0.3);' : 'background: #F3F4F6; color: #9CA3AF;'}">Yes üíó</button>
                                    <button onclick="state.formData.wouldReturn = 'maybe'; render();" style="padding: 16px; border-radius: 16px; font-weight: bold; font-size: 16px; border: none; cursor: pointer; transition: all 0.3s; ${state.formData.wouldReturn === 'maybe' ? 'background: linear-gradient(to right, #FFB6D9, #FFA5C8); color: white; box-shadow: 0 4px 12px rgba(255, 182, 217, 0.3);' : 'background: #F3F4F6; color: #9CA3AF;'}">Maybe üå∏</button>
                                    <button onclick="state.formData.wouldReturn = 'no'; render();" style="padding: 16px; border-radius: 16px; font-weight: bold; font-size: 16px; border: none; cursor: pointer; transition: all 0.3s; ${state.formData.wouldReturn === 'no' ? 'background: linear-gradient(to right, #9CA3AF, #6B7280); color: white; box-shadow: 0 4px 12px rgba(107, 114, 128, 0.3);' : 'background: #F3F4F6; color: #9CA3AF;'}">No ‚úñÔ∏è</button>
                                </div>
                            </div>

                            <!-- Submit -->
                            <button onclick="submitPlace()" class="btn-primary" style="width: 100%; padding: 20px; font-size: 20px; border-radius: 16px;">Submit üíñ</button>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderPlaceDetail() {
            const place = state.places.find(p => p.id === state.selectedPlace);
            if (!place) return renderHomeScreen();

            return `
                <div class="screen gradient-bg-2">
                    <div class="header">
                        <div style="max-width: 960px; margin: 0 auto; padding: 16px 24px; display: flex; align-items: center; gap: 16px;">
                            <button onclick="changeView('home')" style="width: 40px; height: 40px; border-radius: 50%; background: rgba(255, 182, 217, 0.2); border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; color: #FF6B9D; font-size: 20px;">‚Üê</button>
                            <h2 style="font-size: 24px; font-weight: bold; color: #FF69B4;">Place Details</h2>
                        </div>
                    </div>
                    <div style="max-width: 640px; margin: 0 auto; padding: 32px 24px;">
                        <div class="card" style="padding: 0; overflow: hidden;">
                            ${place.images && place.images.length > 0 ? `
                                <div style="position: relative;">
                                    <img src="${place.images[0]}" style="width: 100%; height: 300px; object-fit: cover;" alt="${place.name}">
                                    ${place.images.length > 1 ? `
                                        <div style="position: absolute; bottom: 16px; left: 50%; transform: translateX(-50%); background: rgba(0, 0, 0, 0.5); color: white; padding: 8px 16px; border-radius: 999px; font-size: 14px;">
                                            1 / ${place.images.length}
                                        </div>
                                    ` : ''}
                                </div>
                            ` : ''}
                            <div style="padding: 32px;">
                                <h2 style="font-size: 28px; font-weight: bold; color: #333; margin-bottom: 8px;">${place.name}</h2>
                                <p style="font-size: 16px; color: #666; margin-bottom: 24px;">üìç ${place.location}</p>
                                
                                ${place.description ? `
                                    <div style="margin-bottom: 24px;">
                                        <h3 style="font-size: 18px; font-weight: bold; color: #FF69B4; margin-bottom: 8px;">Description</h3>
                                        <p style="color: #666; line-height: 1.6;">${place.description}</p>
                                    </div>
                                ` : ''}

                                <div style="margin-bottom: 24px;">
                                    <h3 style="font-size: 18px; font-weight: bold; color: #FF69B4; margin-bottom: 8px;">Would I return?</h3>
                                    <span style="display: inline-block; padding: 8px 16px; border-radius: 999px; ${
                                        place.wouldReturn === 'yes' ? 'background: linear-gradient(to right, #FFA5C8, #FF6B9D); color: white;' :
                                        place.wouldReturn === 'maybe' ? 'background: linear-gradient(to right, #FFB6D9, #FFA5C8); color: white;' :
                                        'background: #9CA3AF; color: white;'
                                    }">
                                        ${place.wouldReturn === 'yes' ? 'Yes üíó' : place.wouldReturn === 'maybe' ? 'Maybe üå∏' : 'No ‚úñÔ∏è'}
                                    </span>
                                </div>

                                ${place.images && place.images.length > 1 ? `
                                    <div>
                                        <h3 style="font-size: 18px; font-weight: bold; color: #FF69B4; margin-bottom: 12px;">All Photos</h3>
                                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px;">
                                            ${place.images.map(img => `
                                                <img src="${img}" style="width: 100%; height: 120px; object-fit: cover; border-radius: 12px; border: 2px solid #FFB6D9;" alt="Place photo">
                                            `).join('')}
                                        </div>
                                    </div>
                                ` : ''}

                                <button onclick="deletePlace(${place.id})" style="width: 100%; margin-top: 24px; padding: 16px; background: #EF4444; color: white; border: none; border-radius: 16px; font-size: 16px; font-weight: bold; cursor: pointer;">Delete Place üóëÔ∏è</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Navigation
        function changeView(view) {
            state.currentView = view;
            render();
        }

        function viewPlace(id) {
            state.selectedPlace = id;
            changeView('detail');
        }

        // Image handling
        function handleImageUpload(event) {
            const files = Array.from(event.target.files);
            const maxImages = 5 - state.formData.images.length;
            
            files.slice(0, maxImages).forEach(file => {
                const reader = new FileReader();
                reader.onload = (e) => {
                    state.formData.images.push(e.target.result);
                    render();
                };
                reader.readAsDataURL(file);
            });
        }

        function removeImage(index) {
            state.formData.images.splice(index, 1);
            render();
        }

        // Place management
        function submitPlace() {
            if (!state.formData.name || !state.formData.location) {
                alert('Please fill in at least the name and location! üíï');
                return;
            }

            const newPlace = {
                id: Date.now(),
                name: state.formData.name,
                location: state.formData.location,
                description: state.formData.description,
                images: [...state.formData.images],
                wouldReturn: state.formData.wouldReturn,
                createdAt: new Date().toISOString()
            };

            state.places.push(newPlace);
            savePlaces();

            // Reset form
            state.formData = {
                name: '',
                location: '',
                description: '',
                images: [],
                wouldReturn: ''
            };

            changeView('home');
        }

        function deletePlace(id) {
            if (confirm('Are you sure you want to delete this place? üíî')) {
                state.places = state.places.filter(p => p.id !== id);
                savePlaces();
                changeView('home');
            }
        }

        // Render
        function render() {
            const app = document.getElementById('app');
            let content = '';

            switch(state.currentView) {
                case 'splash':
                    content = renderSplashScreen();
                    break;
                case 'home':
                    content = renderHomeScreen();
                    break;
                case 'collections':
                    content = renderCollectionsScreen();
                    break;
                case 'add':
                    content = renderAddPlaceScreen();
                    break;
                case 'detail':
                    content = renderPlaceDetail();
                    break;
            }

            app.innerHTML = content + (state.currentView !== 'splash' ? renderGuide() : '');
        }

        // Initialize app
        render();
    </script>
</body>
</html>
